$(function(){var e=function(){for(var e={},t=window.location.search.substring(1),a=t.split("&"),n=0;n<a.length;n++){var i=a[n].split("=");if("undefined"==typeof e[i[0]])e[i[0]]=decodeURIComponent(i[1]);else if("string"==typeof e[i[0]]){var s=[e[i[0]],decodeURIComponent(i[1])];e[i[0]]=s}else e[i[0]].push(decodeURIComponent(i[1]))}return e}(),t=[],a=React.createClass({displayName:"Expandable",getInitialState:function(){return{maxHeight:0}},componentDidUpdate:function(e){e.expanded!==this.props.expanded&&this.setMaxHeight()},setMaxHeight:function(){var e=React.findDOMNode(this.refs.content);this.setState({maxHeight:this.props.expanded?e.scrollHeight+"px":"0px"})},render:function(){var e,a=this.props.commonBuild;return void 0!==a&&(a=a.value,"undefined"!=typeof Build&&(e=React.createElement("div",null,React.createElement("h5",null,"Common build"),React.createElement(Build,{build:a,core:t,champLib:this.props.champLib})))),React.createElement("div",{className:"content",style:{maxHeight:this.state.maxHeight,transition:"max-height .3s ease",overflow:"hidden"},ref:"content"},e)}}),n=React.createClass({displayName:"ChampionDiv",getInitialState:function(){return{expanded:!1}},handleClick:function(){this.setState({expanded:!this.state.expanded})},render:function(){var e=this.props.data;return React.createElement("div",null,React.createElement("div",{className:"outer-div"},React.createElement("img",{className:"champion-splash",src:"/res/champion/splash/"+e.id+"_0.jpg"}),React.createElement("div",{className:"champion-div"},React.createElement("div",{className:"champion-thumb",style:{backgroundImage:"url(/res/autocomplete_mock/"+e.id+".png)"}}),React.createElement("div",null,React.createElement("h1",null,e.name.toLowerCase()),React.createElement("h2",null,e.title)))),React.createElement("div",{className:"drop-down"},React.createElement(a,{expanded:this.state.expanded,commonBuild:this.props.commonBuild,champLib:this.props.champLib}),React.createElement("div",{className:"expand-collapse",style:{backgroundImage:"url(/res/expand.png)",transform:this.state.expanded?"rotate(180deg)":"rotate(0deg)"},onClick:this.handleClick}," ")))}}),i=React.createClass({displayName:"ChampionView",getInitialState:function(){return{data:{builds:[],champion:{name:this.props.championName,id:this.props.id,image:[]}},loaded:!1,commonBuild:void 0}},componentDidMount:function(){$.when($.getJSON("/res/champion/"+e.id+".json",function(a){t.champion=a.data[e.id]})).then(function(){return this.setState({data:t,loaded:!0}),$.when($.getJSON("/res/item.json",function(e){t.items=e}),$.getScript("/buildlist.js"),$.getJSON("/res/summoner.json",function(e){var a=[];$.each(e.data,function(e,t){a[t.key]=t}),t.summoners=a}.bind(this)),$.ajax({type:"get",url:this.props.url+t.champion.key,dataType:"json",cache:!0,success:function(e){t.builds=e.data}.bind(this),error:function(e,t,a){console.error(this.props.url,t,a.toString())}.bind(this)}))}.bind(this)).then(function(){return $.each(t.builds,function(e,a){a.value.summonerSpells[0]=t.summoners[a.value.summonerSpells[0]],a.value.summonerSpells[1]=t.summoners[a.value.summonerSpells[1]],a.value.champion=this.props.id}.bind(this)),this.setState({data:t,loaded:!0}),$.ajax({type:"get",url:this.props.commonUrl+t.champion.key,dataType:"json",cache:!0,success:function(e){t.common=e.data}.bind(this),error:function(e,t,a){console.error(this.props.url,t,a.toString())}.bind(this)})}.bind(this)).then(function(){val=t.common,val.value.summonerSpells[0]=t.summoners[val.value.summonerSpells[0]],val.value.summonerSpells[1]=t.summoners[val.value.summonerSpells[1]],val.value.champion=this.props.id,this.setState({commonBuild:t.common})}.bind(this))},render:function(){var e,a={};return a[this.props.id]=t.champion,this.state.loaded&&void 0!=t.builds&&(e=React.createElement(BuildList,{data:this.state.data.builds,core:t,champLib:a})),React.createElement("div",null,React.createElement(n,{data:this.state.data.champion,commonBuild:this.state.commonBuild,champLib:a}),e)}});React.render(React.createElement(i,{url:"http://ec2-54-148-42-154.us-west-2.compute.amazonaws.com:5000/api/champion/outlier/",commonUrl:"http://ec2-54-148-42-154.us-west-2.compute.amazonaws.com:5000/api/champion/common/",id:e.id,championName:""}),$("#main-content")[0])});